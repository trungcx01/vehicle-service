<div class="shop-detail container text-center">
  <div class="top container">
    <div class="shop-header bg-light text-center mb-5 rounded shadow-sm">
      <div class="position-relative">
        <div 
          class="bg-cover rounded-top" 
          style="
            background: url('https://congcutot.vn/uploads/store/page/article/2023/07/thiet-ke-quy-mo-vua-theo-chieu-ngang.jpg') no-repeat center center;
            height: 250px;
            background-size: cover;
          ">
        </div>
        <div class="position-absolute top-100 start-50 translate-middle">
          <img 
            [src]="shop!.user.imageUrl" 
            alt="Shop Avatar" 
            class="rounded-circle border border-3 border-white shadow-lg" 
            style="width: 150px; height: 150px;">
        </div>
      </div>
    
      <div class="mt-5 pt-3">
        <h1 class="fs-4 text-primary fw-bold" style="margin: 0">{{ shop.name }}</h1>
        <div class="text-muted">
          <span>{{ shop.rate }}</span> ★★★★☆ (4.5)
        </div>
      </div>
      <div class="shop-info my-4 p-5 text-start bg-light rounded shadow-sm">
        <div class="row">
          <div class="col-md-6 mb-3">
            <h4 class="text-info">Địa chỉ:</h4>
            <p class="text-dark">{{ shop.address }}</p>
          </div>
    
          <div class="col-md-6 mb-3">
            <h4 class="text-info">Liên hệ:</h4>
            <p class="text-dark">{{ shop.phoneNumber }}</p>
          </div>
    
          <div class="col-md-6 mb-3">
            <h4 class="text-info">Thời gian làm việc:</h4>
            <p class="text-dark">
              Thứ 2 - Chủ Nhật: {{ shop.openHour.substring(0, 5) }} - 
              {{ shop.closeHour.substring(0, 5) }}
            </p>
          </div>
    
          <div class="col-md-6 mb-3">
            <h4 class="text-info">Dịch vụ khẩn cấp:</h4>
            <p class="text-dark">Có sẵn 24/7</p>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="services">
    <h4 class="text-center my-4" style="text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.15); font-size: 1.75rem; font-weight: 600;">Hạng Mục Chăm Sóc Xe</h4>
    <div class="row">
      <!-- Service 1 -->
      <div class="col-md-4 mb-4">
        <div class="service-card card">
          <img
            src="https://voxemay.vn/wp-content/uploads/2021/10/cach-tu-thay-nhot-xe-may-cho-hang-yamaha-tai-nha-1-1024x768.jpg"
            alt="Service Image"
            class="card-img-top"
          />
          <div class="card-body">
            <div class="availability">Available</div>
            <h5 class="card-title">Thay Dầu Xe</h5>
            <p class="card-text">Mô tả ngắn gọn về dịch vụ.</p>
            <p class="estimate-duration">Thời gian: 30 phút</p>
            <p class="price">Giá: 500.000 VND</p>
          </div>
        </div>
      </div>
      <!-- Service 2 -->
      <div class="col-md-4 mb-4">
        <div class="service-card card">
          <img
            src="https://via.placeholder.com/300x200"
            alt="Service Image"
            class="card-img-top"
          />
          <div class="card-body">
            <div class="availability">Available</div>
            <h5 class="card-title">Bảo Dưỡng Xe</h5>
            <p class="card-text">
              Dịch vụ bảo dưỡng định kỳ cho xe máy và ô tô.
            </p>
            <p class="estimate-duration">Thời gian: 1 giờ</p>
            <p class="price">Giá: 300.000 VND</p>
          </div>
        </div>
      </div>
      <!-- Service 3 -->
      <div class="col-md-4 mb-4">
        <div class="service-card card">
          <img
            src="https://via.placeholder.com/300x200"
            alt="Service Image"
            class="card-img-top"
          />
          <div class="card-body">
            <div class="availability">Available</div>
            <h5 class="card-title">Sửa Chữa Động Cơ</h5>
            <p class="card-text">
              Sửa chữa các sự cố liên quan đến động cơ xe.
            </p>
            <p class="estimate-duration">Thời gian: 2 giờ</p>
            <p class="price">Giá: 1.500.000 VND</p>
          </div>
        </div>
      </div>
      <!-- Service 4 -->
      <div class="col-md-4 mb-4">
        <div class="service-card card">
          <img
            src="https://via.placeholder.com/300x200"
            alt="Service Image"
            class="card-img-top"
          />
          <div class="card-body">
            <div class="availability">Available</div>
            <h5 class="card-title">Kiểm Tra Phanh</h5>
            <p class="card-text">Kiểm tra và thay thế má phanh xe.</p>
            <p class="estimate-duration">Thời gian: 45 phút</p>
            <p class="price">Giá: 400.000 VND</p>
          </div>
        </div>
      </div>
      <!-- Service 5 -->
      <div class="col-md-4 mb-4">
        <div class="service-card card">
          <img
            src="https://via.placeholder.com/300x200"
            alt="Service Image"
            class="card-img-top"
          />
          <div class="card-body">
            <div class="availability">Available</div>
            <h5 class="card-title">Thay Lốp Xe</h5>
            <p class="card-text">
              Dịch vụ thay lốp xe với các loại lốp chất lượng cao.
            </p>
            <p class="estimate-duration">Thời gian: 30 phút</p>
            <p class="price">Giá: 600.000 VND</p>
          </div>
        </div>
      </div>
      <!-- Service 6 -->
      <div class="col-md-4 mb-4">
        <div class="service-card card">
          <img
            src="https://via.placeholder.com/300x200"
            alt="Service Image"
            class="card-img-top"
          />
          <div class="card-body">
            <div class="availability">Available</div>
            <h5 class="card-title">Thay Ắc Quy</h5>
            <p class="card-text">Dịch vụ thay thế ắc quy xe máy và ô tô.</p>
            <p class="estimate-duration">Thời gian: 30 phút</p>
            <p class="price">Giá: 300.000 VND</p>
          </div>
        </div>
      </div>
    </div>
    <div class="booking my-4 text-center">
      <button class="btn btn-primary btn-lg" (click)="openAppointmentModal()">
        Đặt Lịch Hẹn
      </button>
    </div>
  </div>

  <section class="reviews">
    <h4 class="text-center my-4" style="text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.15); font-size: 1.75rem; font-weight: 600;">Đánh Giá Về Cửa Hàng</h4>
    <div *ngIf="reviews && reviews.length === 0" class="col-12 m-auto text-center">
      <div class="alert alert-warning p-4 rounded-3 shadow-sm">
        
          <p class="mb-0 text-muted">
              Cửa hàng hiện không có đánh giá nào. Hãy sử dụng dịch vụ và trở thành người đầu tiên đánh giá!
          </p>
      </div>
  </div>
    <div *ngFor="let review of reviews" class="review-card card p-4 mb-4 shadow-sm border-0 comment-form">
  

      <div class="d-flex justify-content-start align-items-center mb-3">
        <div class="col-1">
          <img [src]="review.customer.user.imageUrl"
            alt="Customer Avatar"
            class="rounded-circle"
            width="80" height="80" />
        </div>
        <div class="review-details col-3">
          <div class="customer-name fw-bold">{{ review.customer.name }}</div>
          <div class="review-date text-muted small">{{ review.createAt | date: "dd/MM/yyyy HH:mm" }}</div>
          <div class="type">
            <p><span class="badge" [ngClass]="{
              'bg-primary': review.serviceType === 'APPOINTMENT',
              'bg-dark': review.serviceType === 'EMERGENCY_REQUEST',
            }">{{ review.serviceType }}</span></p>
          </div>
          <div class="review-rating text-warning">
            {{ "★".repeat(review.rate) + "☆".repeat(5 - review.rate) }}
          </div>
        </div>
  

        <div class="review-content text-secondary col-5 mx-4">
          <p>{{ review.description }}</p>
        </div>
  
 
        <div class="review-image col-3">
          <img *ngIf="review.imageUrl"
            [src]="review.imageUrl"
            class="rounded border"
            style="width: 100px; height: 100px; object-fit: cover"
            alt="Attached Review Image" />
        </div>
      </div>
  

      <!-- <div class="dropdown" *ngIf="review.customer.id === customer.id">
        <i style="cursor: pointer;" class="fas fa-ellipsis-h dropdown-toggle" id="dropdownMenuButton"
          data-bs-toggle="dropdown" aria-expanded="false"></i>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
          <li><a class="dropdown-item" href="#">Sửa</a></li>
          <li><a class="dropdown-item" href="#">Xóa</a></li>
        </ul>
      </div> -->
  
    </div>
  </section>
  

  <div class="direction">
    <h4 class="text-center my-4" style="text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.15); font-size: 1.75rem; font-weight: 600;">Đường Đi Tới Cửa Hàng</h4>
    <div id="map" 
         style="width: 100%; height: 400px; margin: 30px auto; 
                border: 2px solid #ddd; 
                border-radius: 8px; 
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); 
                background-color: #f9f9f9;">
    </div>
  </div>
