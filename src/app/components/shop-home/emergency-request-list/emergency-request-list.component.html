<div class="emergency-request-list container mt-5 text-center">
  <div class="header bg-primary text-white d-flex justify-content-between align-items-center mb-4 p-3 rounded">
    <h1 class="h4 m-0">Danh sách yêu cầu hỗ trợ khẩn cấp</h1>
  </div>

  <div class="table-responsive">
    <table class="table table-striped table-bordered">
      <thead class="thead-dark">
        <tr>
          <th>#</th>
          <th>Khách hàng</th>
          <th>Loại phương tiện</th>
          <th>Biển số xe</th>
          <th>Vị trí</th>
          <th>Trạng thái</th>
          <th>Hình ảnh</th>
          <th>Thời gian gửi</th>
          <th>Hành động</th>
        </tr>
      </thead>
      <tbody class="text-center">
        <tr *ngFor="let request of emergencyRequests; let i = index" >
          <td>{{ i + 1 }}</td>
          <td>{{ request.customer.name }}</td>
          <td>{{ request.vehicleType }}</td>
          <td>{{ request.licensePlate }}</td>
          <td>{{ request.location }}</td>
          <td>
            <button *ngIf="request.requestStatus === 'ACCEPTED'" class="btn btn-success btn-sm" disabled>
              {{request.requestStatus}}
            </button>
            <button *ngIf="request.requestStatus === 'PENDING'" class="btn btn-warning btn-sm" disabled>
              {{request.requestStatus}}
            </button>
            <button *ngIf="request.requestStatus === 'UNRESOLVED'" class="btn btn-danger btn-sm" disabled>
              {{request.requestStatus}}
            </button>
            <button *ngIf="request.requestStatus === 'InProgress'" class="btn btn-primary btn-sm" disabled>
              {{request.requestStatus}}
            </button>
          </td>
          <td>
            <div class="d-flex justify-content-start">
              <ng-container *ngFor="let item of request.imageDetail.split(' - '); let i = index">
                <div *ngIf="i < 3" class="image-container d-flex gap-3">
                  <img [src]="item" alt="Chi tiết yêu cầu" class="img-fluid rounded" width="100px" height="100px" />
                </div>
              </ng-container>
            </div>
          </td>          
          <td>{{ request.createdAt | date: 'dd/MM/yyyy hh:ss' }}</td>
          <td>
            <button *ngIf="!request.check" class="btn btn-info btn-sm" (click)="openProposalModal(request)">Đề xuất</button>
            <button *ngIf="request.check"  class="btn btn-secondary btn-sm" (click)="viewProposalModal(request.proposal)">Xem đề xuất</button>
          </td>
        </tr>
        <tr *ngIf="emergencyRequests.length === 0">
          <td colspan="9" class="text-center text-muted">Không có yêu cầu nào!</td>
        </tr>
      </tbody>
    </table>
  </div>


  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-end">
      <li class="page-item"><a class="page-link" href="#">Trước</a></li>
      <li class="page-item"><a class="page-link" href="#">1</a></li>
      <li class="page-item"><a class="page-link" href="#">2</a></li>
      <li class="page-item"><a class="page-link" href="#">3</a></li>
      <li class="page-item"><a class="page-link" href="#">Sau</a></li>
    </ul>
  </nav>
</div>
