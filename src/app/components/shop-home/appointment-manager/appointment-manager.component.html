<div class="appointment-management container mt-5">
  <div class="header bg-primary text-white d-flex justify-content-between align-items-center mb-4 p-3 rounded">
    <h1 class="h4 m-0">Quản Lý Lịch Hẹn</h1>
    <button class="btn btn-light btn-sm fw-bold" (click)="openNew()">Thêm Lịch Hẹn Mới</button>
  </div>

  <table class="table table-striped table-bordered">
    <thead class="thead-dark">
      <tr class="text-center">
        <th>ID</th>
        <th>Ghi Chú</th>
        <th>Thời Gian</th>
        <th>Loại Xe</th>
        <th>Dịch Vụ</th>
        <th>Khách hàng</th>
        <th>Trạng Thái</th>
        <th>Hành Động</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of appointments">
        <td class="text-center">{{ item.id }}</td>
        <td>{{ item.note }}</td>
        <td>{{ item.time }}, {{ item.date | date: 'dd/MM/yyyy' }}</td>
        <td>{{ item.vehicleType }}</td>
        <td>
         
          
          <ul class="list-unstyled mb-4">
            <li *ngFor="let v of item.vehicleCares" class="d-flex align-items-center">
              <span class="me-2">•</span> <!-- Dấu chấm -->
              <span class="text-secondary fw-semibold">{{ v.name }}</span>
            </li>
          </ul>
          
          
         
        </td>
        <td class="text-center">
          {{item.customer.name}}
        </td>
        <td class="text-center">
          <span *ngIf="item.status === 'ACCEPTED'" class="badge bg-success">{{ item.status }}</span>
          <span *ngIf="item.status === 'PENDING'" class="badge bg-warning text-dark">{{ item.status }}</span>
          <span *ngIf="item.status === 'DECLINED'" class="badge bg-danger">{{ item.status }}</span>
          <span *ngIf="item.status === 'FINISHED'" class="badge bg-info text-white">{{ item.status }}</span>
        </td>
        
 
          <!-- Hiển thị nút "Chấp nhận" và "Từ chối" khi status là PENDING -->
          <td class="text-center">
            <button *ngIf="item.status === 'PENDING'" (click)="updateStatus(item.id, 'ACCEPTED')" class="btn btn-success btn-sm text-white">
              <i class="fa fa-check-circle me-1"></i> Chấp nhận
            </button>
            <button *ngIf="item.status === 'PENDING'" (click)="updateStatus(item.id, 'DECLINED')" class="btn btn-danger btn-sm">
              <i class="fa fa-times-circle me-1"></i> Từ chối
            </button>
            <button *ngIf="item.status === 'ACCEPTED'" (click)="updateStatus(item.id, 'FINISHED')" class="btn btn-info btn-sm">
              <i class="fa fa-check-double me-1"></i> Đánh dấu hoàn thành
            </button>
          </td>          
   
        
      </tr>
    </tbody>
  </table>

  <nav aria-label="Page navigation">
    <ul class="pagination justify-content-end">
      <li class="page-item"><a class="page-link" href="#">Trước</a></li>
      <li class="page-item"><a class="page-link" href="#">1</a></li>
      <li class="page-item"><a class="page-link" href="#">2</a></li>
      <li class="page-item"><a class="page-link" href="#">3</a></li>
      <li class="page-item"><a class="page-link" href="#">Sau</a></li>
    </ul>
  </nav>
</div>
